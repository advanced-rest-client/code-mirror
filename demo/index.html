<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
  <title>code-mirror demo</title>

  <script src="../../../@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>

  <script type="module">
    import '../../../@polymer/iron-demo-helpers/demo-pages-shared-styles.js';
    import '../../../@polymer/iron-demo-helpers/demo-snippet.js';
    import '../../../@polymer/polymer/lib/elements/dom-bind.js';
    import '../../../@polymer/paper-styles/paper-styles.js';
    import '../code-mirror.js';
  </script>

  <custom-style>
    <style is="custom-style" include="demo-pages-shared-styles">
    html,
    body {
      overflow: auto;
    }
    .styled {
      --code-mirror-editor: {
        max-height: 120px;
        @apply --paper-font-code1;
      }
    }
    </style>
    <!--
    With HTML imports this was relatively easy task to perform inside web component.
    With module imports it's all get very messy with legacy scripts (using webpack or whatever).
    This scripts cannot be loaded inside the the module as it wont be added to the window object.
    CodeMirror uses `this` instead of `window` or `self` and do not exports any instance.
    Therefore the CM scripts has to be loaded outside the componet.
    -->
    <script src="../../../jsonlint/lib/jsonlint.js"></script>
    <script src="../../../codemirror/lib/codemirror.js"></script>
    <script src="../../../codemirror/addon/mode/loadmode.js"></script>
    <script src="../../../codemirror/mode/meta.js"></script>
    <script src="../../../codemirror/mode/javascript/javascript.js"></script>
    <script src="../../../codemirror/mode/xml/xml.js"></script>
    <script src="../../../codemirror/mode/htmlmixed/htmlmixed.js"></script>
    <script src="../../../codemirror/addon/lint/lint.js"></script>
    <script src="../../../codemirror/addon/lint/json-lint.js"></script>
    <!--
    From the inside of the web component it is hard to determine where
    scripts are actually located. This should be set if the page won't load all possible
    scripts at run time. The component will download the "mode" from this location.
    -->
    <script>
    /* global CodeMirror */
    CodeMirror.modeURL = '../../../codemirror/mode/%N/%N.js';
    </script>
  </custom-style>
</head>

<body>
  <div class="vertical-section-container centered">
    <h3>Default editor</h3>
    <demo-snippet>
      <template>
<code-mirror required="">
{
  "property": "value",
  "integer": 1234,
  "number": 123.4567,
  "boolean": true,
  "nullable": null,
  "arrable": ["one", 2],
  "objectable": {
    "hello": "object"
  }
}
</code-mirror>
      </template>
    </demo-snippet>

    <h3>Regular editor</h3>
    <demo-snippet>
      <template>
<code-mirror mode="javascript">
function myScript() {
  return 100;
}
</code-mirror>
      </template>
    </demo-snippet>

    <h3>Themed editor</h3>
    <demo-snippet>
      <template>
<code-mirror mode="javascript" class="ambiance-theme">
function myScript() {
  return 100;
}
</code-mirror>
<custom-style>
  <style is="custom-style">
  .ambiance-theme {
    --code-mirror-keyword-color: #cda869;
    --code-mirror-atom-color: #CF7EA9;
    --code-mirror-number-color: #78CF8A;
    --code-mirror-def-color: #aac6e3;
    --code-mirror-variable-color: #ffb795;
    --code-mirror-variable-2-color: #eed1b3;
    --code-mirror-variable-3-color: ##faded3;
    --code-mirror-property-color: #eed1b3;
    --code-mirror-operator-color: #fa8d6a;
    --code-mirror-comment-color: #555;
    --code-mirror-string-color: #8f9d6a;
    --code-mirror-string-2-color: #9d937c;
    --code-mirror-meta-color: #D2A8A1;
    --code-mirror-attribute-color: #9B859D;
    --code-mirror-header-color: blue;
    --code-mirror-quote-color: #24C2C7;
    --code-mirror-background-color: #202020;
    --code-mirror-punctuation-color: #fff;
  }
  </style>
</custom-style>
      </template>
    </demo-snippet>

    <h3>Styled markdown</h3>
    <demo-snippet>
      <template>
<code-mirror mode="markdown" class="styled">
# This is markdown
- list element #1
- list element #2
[This is link](http://codemirror.net)
</code-mirror>

<style is="custom-style">
.styled {
  --code-mirror-editor: {
    max-height: 170px;
    @apply --paper-font-code1;
  }
}
</style>
      </template>
    </demo-snippet>

    <h3>JSON linter</h3>
    <demo-snippet>
      <template>

<code-mirror mode="application/json" gutters="[&quot;CodeMirror-lint-markers&quot;]" id="linter">
{
  "a": 'b',
  "value": true
}
</code-mirror>
      </template>
    </demo-snippet>
  </div>
  <script type="module">
  function init() {
    setTimeout(function() {
      const demo = document.getElementById('linter');
      demo.lint = CodeMirror.lint.json;
    }, 100);
  }
  window.addEventListener('WebComponentsReady', init);
  </script>
</body>
</html>
